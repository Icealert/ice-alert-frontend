import{j as s}from"./vendor-ui-BC7PlKq9.js";import{a as zt,b as fe,A as pe,c as ce,r as _,C as Wt,X as Vt,Y as Jt,d as et,T as Kt,e as Gt,f as Xt}from"./vendor-recharts-ClcFuUco.js";import{u as bt,a as Yt,b as Qt,B as Zt,R as er,c as Te}from"./vendor-react-gvLL5RS_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Pe={},tt=zt;Pe.createRoot=tt.createRoot,Pe.hydrateRoot=tt.hydrateRoot;const tr=({name:e,location:t,part_number:r,serial_number:n,icealert_id:a,latest_readings:o,last_updated:i})=>{const d=bt(),f=o!=null&&o.temperature?parseFloat(o.temperature):0,u=o!=null&&o.humidity?parseFloat(o.humidity):0,c=o!=null&&o.flow_rate?parseFloat(o.flow_rate):0,m=(o==null?void 0:o.timestamp)||new Date().toISOString(),b=Math.round((Date.now()-new Date(m).getTime())/(1e3*60*60)),y=20,h=25,p=45,x=55,S=4,T=()=>{const P=f<y||f>h,B=b>=S,ae=u<p||u>x;return P&&B?"Critical":P||B||ae?"Warning":"Good"},k=Array.from({length:48},(P,B)=>({time:B,value:22+Math.random()*5})),M=Array.from({length:48},(P,B)=>({time:B,value:Math.random()>.3?2.5+Math.random():0})),L=Array.from({length:48},(P,B)=>({time:B,value:45+Math.random()*10})),I=T(),z={Good:"bg-green-100 text-green-800 border-green-300",Warning:"bg-yellow-100 text-yellow-800 border-yellow-300",Critical:"bg-red-100 text-red-800 border-red-300"},W=(P,B,ae)=>P<B||P>ae?"text-red-600":"text-gray-900",X=P=>P>=S?"text-red-600":"text-gray-900",G=()=>{d(`/devices/by-icealert/${a}`,{state:{deviceDetails:{name:e,location:t,partNumber:r,serialNumber:n,iceAlertId:a,temperature:`${f}°C`,humidity:`${u}%`,flowRate:`${c} L/min`,lastFlowDetection:m,lastUpdated:i}}})};return s.jsxs("div",{onClick:G,className:"bg-white p-1.5 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer border border-gray-100 relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-blue-500 opacity-0 group-hover:opacity-5 transition-opacity duration-300 rounded-lg"}),s.jsx("div",{className:"absolute bottom-2 right-2",children:s.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full shadow-sm hover:bg-blue-700 transition-colors",children:"View Details →"})}),s.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-blue-600",children:"❄️"}),s.jsx("h3",{className:"text-sm font-bold text-blue-900",children:e})]}),s.jsx("span",{className:"text-[10px] text-gray-400",children:"|"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-blue-600 text-[10px] font-semibold",children:"IceAlert:"}),s.jsx("span",{className:"text-[10px] text-gray-600",children:a})]})]}),s.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] font-medium ${z[I]}`,children:I})]}),s.jsxs("div",{className:"flex flex-col gap-0.5 mb-1",children:[s.jsx("p",{className:"text-gray-600 text-xs",children:t}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["PN: ",r]}),s.jsx("span",{children:"•"}),s.jsxs("span",{children:["SN: ",n]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-sm mt-0.5",children:"🌡️"}),s.jsxs("div",{className:"w-full",children:[s.jsx("p",{className:"text-gray-600 text-[10px] leading-tight",children:"Temperature"}),s.jsxs("p",{className:`font-bold text-xs leading-tight ${W(f,y,h)}`,children:[f,"°C"]}),s.jsxs("p",{className:"text-[8px] text-gray-500 leading-tight",children:["Normal: ",y,"°C - ",h,"°C"]}),s.jsx("div",{className:"h-8 mt-0.5",children:s.jsx(fe,{width:"100%",height:"100%",children:s.jsx(pe,{data:k,children:s.jsx(ce,{type:"monotone",dataKey:"value",stroke:"#3b82f6",fill:"#93c5fd",strokeWidth:1})})})})]})]}),s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-sm mt-0.5",children:"🌊"}),s.jsxs("div",{className:"w-full",children:[s.jsx("p",{className:"text-gray-600 text-[10px] leading-tight",children:"Last Flow Rate"}),s.jsxs("p",{className:"font-bold text-xs leading-tight",children:[c," L/min"]}),s.jsxs("p",{className:"text-[8px] text-gray-500 leading-tight",children:["at ",new Date(m).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),s.jsx("div",{className:"h-8 mt-0.5",children:s.jsx(fe,{width:"100%",height:"100%",children:s.jsx(pe,{data:M,children:s.jsx(ce,{type:"monotone",dataKey:"value",stroke:"#10b981",fill:"#6ee7b7",strokeWidth:1})})})})]})]}),s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-sm mt-0.5",children:"💧"}),s.jsxs("div",{className:"w-full",children:[s.jsx("p",{className:"text-gray-600 text-[10px] leading-tight",children:"Humidity"}),s.jsxs("p",{className:`font-bold text-xs leading-tight ${W(u,p,x)}`,children:[u,"%"]}),s.jsxs("p",{className:"text-[8px] text-gray-500 leading-tight",children:["Normal: ",p,"% - ",x,"%"]}),s.jsx("div",{className:"h-8 mt-0.5",children:s.jsx(fe,{width:"100%",height:"100%",children:s.jsx(pe,{data:L,children:s.jsx(ce,{type:"monotone",dataKey:"value",stroke:"#6366f1",fill:"#a5b4fc",strokeWidth:1})})})})]})]}),s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx("span",{className:"text-sm mt-0.5",children:"⏱️"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-[10px] leading-tight",children:"Hours Since Flow"}),s.jsxs("p",{className:`font-bold text-xs leading-tight ${X(b)}`,children:[b," hrs"]}),s.jsxs("p",{className:"text-[8px] text-gray-500 leading-tight",children:["Critical after: ",S," hrs"]})]})]})]})]})};function yt(e,t){return function(){return e.apply(t,arguments)}}const{toString:rr}=Object.prototype,{getPrototypeOf:$e}=Object,Ne=(e=>t=>{const r=rr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),J=e=>(e=e.toLowerCase(),t=>Ne(t)===e),Re=e=>t=>typeof t===e,{isArray:se}=Array,de=Re("undefined");function sr(e){return e!==null&&!de(e)&&e.constructor!==null&&!de(e.constructor)&&D(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const wt=J("ArrayBuffer");function nr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&wt(e.buffer),t}const ar=Re("string"),D=Re("function"),jt=Re("number"),ve=e=>e!==null&&typeof e=="object",or=e=>e===!0||e===!1,xe=e=>{if(Ne(e)!=="object")return!1;const t=$e(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ir=J("Date"),lr=J("File"),cr=J("Blob"),dr=J("FileList"),ur=e=>ve(e)&&D(e.pipe),mr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||D(e.append)&&((t=Ne(e))==="formdata"||t==="object"&&D(e.toString)&&e.toString()==="[object FormData]"))},hr=J("URLSearchParams"),[fr,pr,xr,gr]=["ReadableStream","Request","Response","Headers"].map(J),br=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ue(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),se(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let d;for(n=0;n<i;n++)d=o[n],t.call(null,e[d],d,e)}}function Nt(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const Z=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rt=e=>!de(e)&&e!==Z;function _e(){const{caseless:e}=Rt(this)&&this||{},t={},r=(n,a)=>{const o=e&&Nt(t,a)||a;xe(t[o])&&xe(n)?t[o]=_e(t[o],n):xe(n)?t[o]=_e({},n):se(n)?t[o]=n.slice():t[o]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&ue(arguments[n],r);return t}const yr=(e,t,r,{allOwnKeys:n}={})=>(ue(t,(a,o)=>{r&&D(a)?e[o]=yt(a,r):e[o]=a},{allOwnKeys:n}),e),wr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jr=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Nr=(e,t,r,n)=>{let a,o,i;const d={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)i=a[o],(!n||n(i,e,t))&&!d[i]&&(t[i]=e[i],d[i]=!0);e=r!==!1&&$e(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Rr=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},vr=e=>{if(!e)return null;if(se(e))return e;let t=e.length;if(!jt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Sr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&$e(Uint8Array)),Er=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=n.next())&&!a.done;){const o=a.value;t.call(e,o[0],o[1])}},Ar=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Tr=J("HTMLFormElement"),kr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),rt=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Cr=J("RegExp"),vt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};ue(r,(a,o)=>{let i;(i=t(a,o,e))!==!1&&(n[o]=i||a)}),Object.defineProperties(e,n)},Or=e=>{vt(e,(t,r)=>{if(D(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(D(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Lr=(e,t)=>{const r={},n=a=>{a.forEach(o=>{r[o]=!0})};return se(e)?n(e):n(String(e).split(t)),r},Fr=()=>{},Pr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,ke="abcdefghijklmnopqrstuvwxyz",st="0123456789",St={DIGIT:st,ALPHA:ke,ALPHA_DIGIT:ke+ke.toUpperCase()+st},_r=(e=16,t=St.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Ur(e){return!!(e&&D(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Mr=e=>{const t=new Array(10),r=(n,a)=>{if(ve(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const o=se(n)?[]:{};return ue(n,(i,d)=>{const f=r(i,a+1);!de(f)&&(o[d]=f)}),t[a]=void 0,o}}return n};return r(e,0)},Ir=J("AsyncFunction"),Dr=e=>e&&(ve(e)||D(e))&&D(e.then)&&D(e.catch),Et=((e,t)=>e?setImmediate:t?((r,n)=>(Z.addEventListener("message",({source:a,data:o})=>{a===Z&&o===r&&n.length&&n.shift()()},!1),a=>{n.push(a),Z.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",D(Z.postMessage)),Br=typeof queueMicrotask<"u"?queueMicrotask.bind(Z):typeof process<"u"&&process.nextTick||Et,l={isArray:se,isArrayBuffer:wt,isBuffer:sr,isFormData:mr,isArrayBufferView:nr,isString:ar,isNumber:jt,isBoolean:or,isObject:ve,isPlainObject:xe,isReadableStream:fr,isRequest:pr,isResponse:xr,isHeaders:gr,isUndefined:de,isDate:ir,isFile:lr,isBlob:cr,isRegExp:Cr,isFunction:D,isStream:ur,isURLSearchParams:hr,isTypedArray:Sr,isFileList:dr,forEach:ue,merge:_e,extend:yr,trim:br,stripBOM:wr,inherits:jr,toFlatObject:Nr,kindOf:Ne,kindOfTest:J,endsWith:Rr,toArray:vr,forEachEntry:Er,matchAll:Ar,isHTMLForm:Tr,hasOwnProperty:rt,hasOwnProp:rt,reduceDescriptors:vt,freezeMethods:Or,toObjectSet:Lr,toCamelCase:kr,noop:Fr,toFiniteNumber:Pr,findKey:Nt,global:Z,isContextDefined:Rt,ALPHABET:St,generateString:_r,isSpecCompliantForm:Ur,toJSONObject:Mr,isAsyncFn:Ir,isThenable:Dr,setImmediate:Et,asap:Br};function w(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}l.inherits(w,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.status}}});const At=w.prototype,Tt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Tt[e]={value:e}});Object.defineProperties(w,Tt);Object.defineProperty(At,"isAxiosError",{value:!0});w.from=(e,t,r,n,a,o)=>{const i=Object.create(At);return l.toFlatObject(e,i,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),w.call(i,e.message,t,r,n,a),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const $r=null;function Ue(e){return l.isPlainObject(e)||l.isArray(e)}function kt(e){return l.endsWith(e,"[]")?e.slice(0,-2):e}function nt(e,t,r){return e?e.concat(t).map(function(a,o){return a=kt(a),!r&&o?"["+a+"]":a}).join(r?".":""):t}function Hr(e){return l.isArray(e)&&!e.some(Ue)}const qr=l.toFlatObject(l,{},null,function(t){return/^is[A-Z]/.test(t)});function Se(e,t,r){if(!l.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=l.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,x){return!l.isUndefined(x[p])});const n=r.metaTokens,a=r.visitor||c,o=r.dots,i=r.indexes,f=(r.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(t);if(!l.isFunction(a))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(l.isDate(h))return h.toISOString();if(!f&&l.isBlob(h))throw new w("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(h)||l.isTypedArray(h)?f&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,p,x){let S=h;if(h&&!x&&typeof h=="object"){if(l.endsWith(p,"{}"))p=n?p:p.slice(0,-2),h=JSON.stringify(h);else if(l.isArray(h)&&Hr(h)||(l.isFileList(h)||l.endsWith(p,"[]"))&&(S=l.toArray(h)))return p=kt(p),S.forEach(function(k,M){!(l.isUndefined(k)||k===null)&&t.append(i===!0?nt([p],M,o):i===null?p:p+"[]",u(k))}),!1}return Ue(h)?!0:(t.append(nt(x,p,o),u(h)),!1)}const m=[],b=Object.assign(qr,{defaultVisitor:c,convertValue:u,isVisitable:Ue});function y(h,p){if(!l.isUndefined(h)){if(m.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));m.push(h),l.forEach(h,function(S,T){(!(l.isUndefined(S)||S===null)&&a.call(t,S,l.isString(T)?T.trim():T,p,b))===!0&&y(S,p?p.concat(T):[T])}),m.pop()}}if(!l.isObject(e))throw new TypeError("data must be an object");return y(e),t}function at(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function He(e,t){this._pairs=[],e&&Se(e,this,t)}const Ct=He.prototype;Ct.append=function(t,r){this._pairs.push([t,r])};Ct.toString=function(t){const r=t?function(n){return t.call(this,n,at)}:at;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function zr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ot(e,t,r){if(!t)return e;const n=r&&r.encode||zr;l.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(a?o=a(t,r):o=l.isURLSearchParams(t)?t.toString():new He(t,r).toString(n),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class ot{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){l.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Lt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wr=typeof URLSearchParams<"u"?URLSearchParams:He,Vr=typeof FormData<"u"?FormData:null,Jr=typeof Blob<"u"?Blob:null,Kr={isBrowser:!0,classes:{URLSearchParams:Wr,FormData:Vr,Blob:Jr},protocols:["http","https","file","blob","url","data"]},qe=typeof window<"u"&&typeof document<"u",Me=typeof navigator=="object"&&navigator||void 0,Gr=qe&&(!Me||["ReactNative","NativeScript","NS"].indexOf(Me.product)<0),Xr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yr=qe&&window.location.href||"http://localhost",Qr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qe,hasStandardBrowserEnv:Gr,hasStandardBrowserWebWorkerEnv:Xr,navigator:Me,origin:Yr},Symbol.toStringTag,{value:"Module"})),F={...Qr,...Kr};function Zr(e,t){return Se(e,new F.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,o){return F.isNode&&l.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function es(e){return l.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ts(e){const t={},r=Object.keys(e);let n;const a=r.length;let o;for(n=0;n<a;n++)o=r[n],t[o]=e[o];return t}function Ft(e){function t(r,n,a,o){let i=r[o++];if(i==="__proto__")return!0;const d=Number.isFinite(+i),f=o>=r.length;return i=!i&&l.isArray(a)?a.length:i,f?(l.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!d):((!a[i]||!l.isObject(a[i]))&&(a[i]=[]),t(r,n,a[i],o)&&l.isArray(a[i])&&(a[i]=ts(a[i])),!d)}if(l.isFormData(e)&&l.isFunction(e.entries)){const r={};return l.forEachEntry(e,(n,a)=>{t(es(n),a,r,0)}),r}return null}function rs(e,t,r){if(l.isString(e))try{return(t||JSON.parse)(e),l.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const me={transitional:Lt,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,o=l.isObject(t);if(o&&l.isHTMLForm(t)&&(t=new FormData(t)),l.isFormData(t))return a?JSON.stringify(Ft(t)):t;if(l.isArrayBuffer(t)||l.isBuffer(t)||l.isStream(t)||l.isFile(t)||l.isBlob(t)||l.isReadableStream(t))return t;if(l.isArrayBufferView(t))return t.buffer;if(l.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Zr(t,this.formSerializer).toString();if((d=l.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Se(d?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||a?(r.setContentType("application/json",!1),rs(t)):t}],transformResponse:[function(t){const r=this.transitional||me.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(l.isResponse(t)||l.isReadableStream(t))return t;if(t&&l.isString(t)&&(n&&!this.responseType||a)){const i=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(d){if(i)throw d.name==="SyntaxError"?w.from(d,w.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:F.classes.FormData,Blob:F.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};l.forEach(["delete","get","head","post","put","patch"],e=>{me.headers[e]={}});const ss=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ns=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(i){a=i.indexOf(":"),r=i.substring(0,a).trim().toLowerCase(),n=i.substring(a+1).trim(),!(!r||t[r]&&ss[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},it=Symbol("internals");function le(e){return e&&String(e).trim().toLowerCase()}function ge(e){return e===!1||e==null?e:l.isArray(e)?e.map(ge):String(e)}function as(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const os=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ce(e,t,r,n,a){if(l.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!l.isString(t)){if(l.isString(n))return t.indexOf(n)!==-1;if(l.isRegExp(n))return n.test(t)}}function is(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function ls(e,t){const r=l.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,o,i){return this[n].call(this,t,a,o,i)},configurable:!0})})}class U{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function o(d,f,u){const c=le(f);if(!c)throw new Error("header name must be a non-empty string");const m=l.findKey(a,c);(!m||a[m]===void 0||u===!0||u===void 0&&a[m]!==!1)&&(a[m||f]=ge(d))}const i=(d,f)=>l.forEach(d,(u,c)=>o(u,c,f));if(l.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(l.isString(t)&&(t=t.trim())&&!os(t))i(ns(t),r);else if(l.isHeaders(t))for(const[d,f]of t.entries())o(f,d,n);else t!=null&&o(r,t,n);return this}get(t,r){if(t=le(t),t){const n=l.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return as(a);if(l.isFunction(r))return r.call(this,a,n);if(l.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=le(t),t){const n=l.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Ce(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function o(i){if(i=le(i),i){const d=l.findKey(n,i);d&&(!r||Ce(n,n[d],d,r))&&(delete n[d],a=!0)}}return l.isArray(t)?t.forEach(o):o(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const o=r[n];(!t||Ce(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const r=this,n={};return l.forEach(this,(a,o)=>{const i=l.findKey(n,o);if(i){r[i]=ge(a),delete r[o];return}const d=t?is(o):String(o).trim();d!==o&&delete r[o],r[d]=ge(a),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return l.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&l.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[it]=this[it]={accessors:{}}).accessors,a=this.prototype;function o(i){const d=le(i);n[d]||(ls(a,i),n[d]=!0)}return l.isArray(t)?t.forEach(o):o(t),this}}U.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);l.reduceDescriptors(U.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});l.freezeMethods(U);function Oe(e,t){const r=this||me,n=t||r,a=U.from(n.headers);let o=n.data;return l.forEach(e,function(d){o=d.call(r,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function Pt(e){return!!(e&&e.__CANCEL__)}function ne(e,t,r){w.call(this,e??"canceled",w.ERR_CANCELED,t,r),this.name="CanceledError"}l.inherits(ne,w,{__CANCEL__:!0});function _t(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new w("Request failed with status code "+r.status,[w.ERR_BAD_REQUEST,w.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function cs(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ds(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,o=0,i;return t=t!==void 0?t:1e3,function(f){const u=Date.now(),c=n[o];i||(i=u),r[a]=f,n[a]=u;let m=o,b=0;for(;m!==a;)b+=r[m++],m=m%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),u-i<t)return;const y=c&&u-c;return y?Math.round(b*1e3/y):void 0}}function us(e,t){let r=0,n=1e3/t,a,o;const i=(u,c=Date.now())=>{r=c,a=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const c=Date.now(),m=c-r;m>=n?i(u,c):(a=u,o||(o=setTimeout(()=>{o=null,i(a)},n-m)))},()=>a&&i(a)]}const we=(e,t,r=3)=>{let n=0;const a=ds(50,250);return us(o=>{const i=o.loaded,d=o.lengthComputable?o.total:void 0,f=i-n,u=a(f),c=i<=d;n=i;const m={loaded:i,total:d,progress:d?i/d:void 0,bytes:f,rate:u||void 0,estimated:u&&d&&c?(d-i)/u:void 0,event:o,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(m)},r)},lt=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ct=e=>(...t)=>l.asap(()=>e(...t)),ms=F.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,F.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(F.origin),F.navigator&&/(msie|trident)/i.test(F.navigator.userAgent)):()=>!0,hs=F.hasStandardBrowserEnv?{write(e,t,r,n,a,o){const i=[e+"="+encodeURIComponent(t)];l.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),l.isString(n)&&i.push("path="+n),l.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fs(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ps(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ut(e,t){return e&&!fs(t)?ps(e,t):t}const dt=e=>e instanceof U?{...e}:e;function re(e,t){t=t||{};const r={};function n(u,c,m,b){return l.isPlainObject(u)&&l.isPlainObject(c)?l.merge.call({caseless:b},u,c):l.isPlainObject(c)?l.merge({},c):l.isArray(c)?c.slice():c}function a(u,c,m,b){if(l.isUndefined(c)){if(!l.isUndefined(u))return n(void 0,u,m,b)}else return n(u,c,m,b)}function o(u,c){if(!l.isUndefined(c))return n(void 0,c)}function i(u,c){if(l.isUndefined(c)){if(!l.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function d(u,c,m){if(m in t)return n(u,c);if(m in e)return n(void 0,u)}const f={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:d,headers:(u,c,m)=>a(dt(u),dt(c),m,!0)};return l.forEach(Object.keys(Object.assign({},e,t)),function(c){const m=f[c]||a,b=m(e[c],t[c],c);l.isUndefined(b)&&m!==d||(r[c]=b)}),r}const Mt=e=>{const t=re({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:d}=t;t.headers=i=U.from(i),t.url=Ot(Ut(t.baseURL,t.url),e.params,e.paramsSerializer),d&&i.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(l.isFormData(r)){if(F.hasStandardBrowserEnv||F.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((f=i.getContentType())!==!1){const[u,...c]=f?f.split(";").map(m=>m.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...c].join("; "))}}if(F.hasStandardBrowserEnv&&(n&&l.isFunction(n)&&(n=n(t)),n||n!==!1&&ms(t.url))){const u=a&&o&&hs.read(o);u&&i.set(a,u)}return t},xs=typeof XMLHttpRequest<"u",gs=xs&&function(e){return new Promise(function(r,n){const a=Mt(e);let o=a.data;const i=U.from(a.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:u}=a,c,m,b,y,h;function p(){y&&y(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout;function S(){if(!x)return;const k=U.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),L={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:k,config:e,request:x};_t(function(z){r(z),p()},function(z){n(z),p()},L),x=null}"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(S)},x.onabort=function(){x&&(n(new w("Request aborted",w.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new w("Network Error",w.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let M=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const L=a.transitional||Lt;a.timeoutErrorMessage&&(M=a.timeoutErrorMessage),n(new w(M,L.clarifyTimeoutError?w.ETIMEDOUT:w.ECONNABORTED,e,x)),x=null},o===void 0&&i.setContentType(null),"setRequestHeader"in x&&l.forEach(i.toJSON(),function(M,L){x.setRequestHeader(L,M)}),l.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),d&&d!=="json"&&(x.responseType=a.responseType),u&&([b,h]=we(u,!0),x.addEventListener("progress",b)),f&&x.upload&&([m,y]=we(f),x.upload.addEventListener("progress",m),x.upload.addEventListener("loadend",y)),(a.cancelToken||a.signal)&&(c=k=>{x&&(n(!k||k.type?new ne(null,e,x):k),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const T=cs(a.url);if(T&&F.protocols.indexOf(T)===-1){n(new w("Unsupported protocol "+T+":",w.ERR_BAD_REQUEST,e));return}x.send(o||null)})},bs=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const o=function(u){if(!a){a=!0,d();const c=u instanceof Error?u:this.reason;n.abort(c instanceof w?c:new ne(c instanceof Error?c.message:c))}};let i=t&&setTimeout(()=>{i=null,o(new w(`timeout ${t} of ms exceeded`,w.ETIMEDOUT))},t);const d=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:f}=n;return f.unsubscribe=()=>l.asap(d),f}},ys=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},ws=async function*(e,t){for await(const r of js(e))yield*ys(r,t)},js=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},ut=(e,t,r,n)=>{const a=ws(e,t);let o=0,i,d=f=>{i||(i=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:u,value:c}=await a.next();if(u){d(),f.close();return}let m=c.byteLength;if(r){let b=o+=m;r(b)}f.enqueue(new Uint8Array(c))}catch(u){throw d(u),u}},cancel(f){return d(f),a.return()}},{highWaterMark:2})},Ee=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",It=Ee&&typeof ReadableStream=="function",Ns=Ee&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Dt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Rs=It&&Dt(()=>{let e=!1;const t=new Request(F.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),mt=64*1024,Ie=It&&Dt(()=>l.isReadableStream(new Response("").body)),je={stream:Ie&&(e=>e.body)};Ee&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!je[t]&&(je[t]=l.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new w(`Response type '${t}' is not supported`,w.ERR_NOT_SUPPORT,n)})})})(new Response);const vs=async e=>{if(e==null)return 0;if(l.isBlob(e))return e.size;if(l.isSpecCompliantForm(e))return(await new Request(F.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(l.isArrayBufferView(e)||l.isArrayBuffer(e))return e.byteLength;if(l.isURLSearchParams(e)&&(e=e+""),l.isString(e))return(await Ns(e)).byteLength},Ss=async(e,t)=>{const r=l.toFiniteNumber(e.getContentLength());return r??vs(t)},Es=Ee&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:o,timeout:i,onDownloadProgress:d,onUploadProgress:f,responseType:u,headers:c,withCredentials:m="same-origin",fetchOptions:b}=Mt(e);u=u?(u+"").toLowerCase():"text";let y=bs([a,o&&o.toAbortSignal()],i),h;const p=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let x;try{if(f&&Rs&&r!=="get"&&r!=="head"&&(x=await Ss(c,n))!==0){let L=new Request(t,{method:"POST",body:n,duplex:"half"}),I;if(l.isFormData(n)&&(I=L.headers.get("content-type"))&&c.setContentType(I),L.body){const[z,W]=lt(x,we(ct(f)));n=ut(L.body,mt,z,W)}}l.isString(m)||(m=m?"include":"omit");const S="credentials"in Request.prototype;h=new Request(t,{...b,signal:y,method:r.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:S?m:void 0});let T=await fetch(h);const k=Ie&&(u==="stream"||u==="response");if(Ie&&(d||k&&p)){const L={};["status","statusText","headers"].forEach(X=>{L[X]=T[X]});const I=l.toFiniteNumber(T.headers.get("content-length")),[z,W]=d&&lt(I,we(ct(d),!0))||[];T=new Response(ut(T.body,mt,z,()=>{W&&W(),p&&p()}),L)}u=u||"text";let M=await je[l.findKey(je,u)||"text"](T,e);return!k&&p&&p(),await new Promise((L,I)=>{_t(L,I,{data:M,headers:U.from(T.headers),status:T.status,statusText:T.statusText,config:e,request:h})})}catch(S){throw p&&p(),S&&S.name==="TypeError"&&/fetch/i.test(S.message)?Object.assign(new w("Network Error",w.ERR_NETWORK,e,h),{cause:S.cause||S}):w.from(S,S&&S.code,e,h)}}),De={http:$r,xhr:gs,fetch:Es};l.forEach(De,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ht=e=>`- ${e}`,As=e=>l.isFunction(e)||e===null||e===!1,Bt={getAdapter:e=>{e=l.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let o=0;o<t;o++){r=e[o];let i;if(n=r,!As(r)&&(n=De[(i=String(r)).toLowerCase()],n===void 0))throw new w(`Unknown adapter '${i}'`);if(n)break;a[i||"#"+o]=n}if(!n){const o=Object.entries(a).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(ht).join(`
`):" "+ht(o[0]):"as no adapter specified";throw new w("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:De};function Le(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ne(null,e)}function ft(e){return Le(e),e.headers=U.from(e.headers),e.data=Oe.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Bt.getAdapter(e.adapter||me.adapter)(e).then(function(n){return Le(e),n.data=Oe.call(e,e.transformResponse,n),n.headers=U.from(n.headers),n},function(n){return Pt(n)||(Le(e),n&&n.response&&(n.response.data=Oe.call(e,e.transformResponse,n.response),n.response.headers=U.from(n.response.headers))),Promise.reject(n)})}const $t="1.7.9",Ae={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ae[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const pt={};Ae.transitional=function(t,r,n){function a(o,i){return"[Axios v"+$t+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,d)=>{if(t===!1)throw new w(a(i," has been removed"+(r?" in "+r:"")),w.ERR_DEPRECATED);return r&&!pt[i]&&(pt[i]=!0,console.warn(a(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,i,d):!0}};Ae.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Ts(e,t,r){if(typeof e!="object")throw new w("options must be an object",w.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const o=n[a],i=t[o];if(i){const d=e[o],f=d===void 0||i(d,o,e);if(f!==!0)throw new w("option "+o+" must be "+f,w.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new w("Unknown option "+o,w.ERR_BAD_OPTION)}}const be={assertOptions:Ts,validators:Ae},K=be.validators;class ee{constructor(t){this.defaults=t,this.interceptors={request:new ot,response:new ot}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=re(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:o}=r;n!==void 0&&be.assertOptions(n,{silentJSONParsing:K.transitional(K.boolean),forcedJSONParsing:K.transitional(K.boolean),clarifyTimeoutError:K.transitional(K.boolean)},!1),a!=null&&(l.isFunction(a)?r.paramsSerializer={serialize:a}:be.assertOptions(a,{encode:K.function,serialize:K.function},!0)),be.assertOptions(r,{baseUrl:K.spelling("baseURL"),withXsrfToken:K.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&l.merge(o.common,o[r.method]);o&&l.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),r.headers=U.concat(i,o);const d=[];let f=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(f=f&&p.synchronous,d.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let c,m=0,b;if(!f){const h=[ft.bind(this),void 0];for(h.unshift.apply(h,d),h.push.apply(h,u),b=h.length,c=Promise.resolve(r);m<b;)c=c.then(h[m++],h[m++]);return c}b=d.length;let y=r;for(m=0;m<b;){const h=d[m++],p=d[m++];try{y=h(y)}catch(x){p.call(this,x);break}}try{c=ft.call(this,y)}catch(h){return Promise.reject(h)}for(m=0,b=u.length;m<b;)c=c.then(u[m++],u[m++]);return c}getUri(t){t=re(this.defaults,t);const r=Ut(t.baseURL,t.url);return Ot(r,t.params,t.paramsSerializer)}}l.forEach(["delete","get","head","options"],function(t){ee.prototype[t]=function(r,n){return this.request(re(n||{},{method:t,url:r,data:(n||{}).data}))}});l.forEach(["post","put","patch"],function(t){function r(n){return function(o,i,d){return this.request(re(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}ee.prototype[t]=r(),ee.prototype[t+"Form"]=r(!0)});class ze{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(a=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](a);n._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(d=>{n.subscribe(d),o=d}).then(a);return i.cancel=function(){n.unsubscribe(o)},i},t(function(o,i,d){n.reason||(n.reason=new ne(o,i,d),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new ze(function(a){t=a}),cancel:t}}}function ks(e){return function(r){return e.apply(null,r)}}function Cs(e){return l.isObject(e)&&e.isAxiosError===!0}const Be={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Be).forEach(([e,t])=>{Be[t]=e});function Ht(e){const t=new ee(e),r=yt(ee.prototype.request,t);return l.extend(r,ee.prototype,t,{allOwnKeys:!0}),l.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Ht(re(e,a))},r}const O=Ht(me);O.Axios=ee;O.CanceledError=ne;O.CancelToken=ze;O.isCancel=Pt;O.VERSION=$t;O.toFormData=Se;O.AxiosError=w;O.Cancel=O.CanceledError;O.all=function(t){return Promise.all(t)};O.spread=ks;O.isAxiosError=Cs;O.mergeConfig=re;O.AxiosHeaders=U;O.formToJSON=e=>Ft(l.isHTMLForm(e)?new FormData(e):e);O.getAdapter=Bt.getAdapter;O.HttpStatusCode=Be;O.default=O;const ye="https://ice-alert-backend.onrender.com",te=ye.endsWith("/api")?ye:`${ye}/api`;console.log("API Configuration:",{rawUrl:ye,normalizedUrl:te,environment:"production",origin:typeof window<"u"?window.location.origin:"unknown",timestamp:new Date().toISOString()});try{new URL(te)}catch(e){throw console.error("Invalid API URL configuration:",{url:te,error:{message:e.message,name:e.name,stack:e.stack},environment:"production",timestamp:new Date().toISOString()}),new Error(`Invalid API URL: ${te}`)}const Os={withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"}};console.log("Complete API Configuration:",{baseUrl:te,config:Os,environment:"production",timestamp:new Date().toISOString()});const q=O.create({baseURL:te,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});q.interceptors.request.use(e=>{var t;return console.log("Starting Request:",{method:(t=e.method)==null?void 0:t.toUpperCase(),url:e.url,baseURL:e.baseURL,fullUrl:`${e.baseURL}${e.url}`,headers:e.headers,data:e.data,withCredentials:e.withCredentials}),e},e=>(console.error("Request Error:",e),Promise.reject(e)));q.interceptors.response.use(e=>(console.log("Response:",{status:e.status,url:e.config.url,fullUrl:`${e.config.baseURL}${e.config.url}`,data:e.data,headers:e.headers}),e),e=>{var n,a,o,i,d,f,u,c,m,b,y,h,p,x;console.error("API Error:",{url:(n=e.config)==null?void 0:n.url,fullUrl:e.config?`${e.config.baseURL}${e.config.url}`:"unknown",method:(a=e.config)==null?void 0:a.method,status:(o=e.response)==null?void 0:o.status,data:(i=e.response)==null?void 0:i.data,message:e.message,stack:e.stack,headers:(d=e.config)==null?void 0:d.headers,withCredentials:(f=e.config)==null?void 0:f.withCredentials});let t="An unexpected error occurred";if(e.response)switch(e.response.status){case 400:t=((u=e.response.data)==null?void 0:u.error)||"Invalid request. Please check your input.";break;case 401:t="Unauthorized. Please log in again.";break;case 403:t="Access denied. You do not have permission.";break;case 404:t=`Resource not found: ${(c=e.config)==null?void 0:c.url}`;break;case 500:t=((m=e.response.data)==null?void 0:m.error)||"Server error. Please try again later.";break;default:t=((b=e.response.data)==null?void 0:b.error)||e.message}else e.request&&(t="Network error. Please check your connection.",console.error("CORS Error Details:",{origin:window.location.origin,targetUrl:(y=e.config)==null?void 0:y.url,fullUrl:e.config?`${e.config.baseURL}${e.config.url}`:"unknown",method:(h=e.config)==null?void 0:h.method,headers:(p=e.config)==null?void 0:p.headers}));const r=new Error(t);return r.originalError=e,r.response=e.response,r.status=(x=e.response)==null?void 0:x.status,Promise.reject(r)});const qt={async getDevices(){try{return console.log("Fetching all devices"),(await q.get("/devices")).data}catch(e){throw console.error("Failed to fetch devices:",e),e}},async getDevice(e){try{return console.log("Fetching device:",e),(await q.get(`/devices/${encodeURIComponent(e)}`)).data}catch(t){throw console.error("Failed to fetch device:",t),t}},async getDeviceByIceAlertId(e){try{return console.log("Fetching device by IceAlert ID:",e),(await q.get(`/devices/by-icealert/${encodeURIComponent(e)}`)).data}catch(t){throw console.error("Failed to fetch device by IceAlert ID:",t),t}},async getDeviceReadings(e,t=24){try{return console.log("Fetching readings for device:",e,"hours:",t),(await q.get(`/devices/by-icealert/${encodeURIComponent(e)}/readings`,{params:{hours:t}})).data}catch(r){throw console.error("Failed to fetch device readings:",r),r}},async submitReading(e){try{return console.log("Submitting new reading:",e),(await q.post("/readings",e)).data}catch(t){throw console.error("Failed to submit reading:",t),t}},async getAlertSettings(e){try{return console.log("Fetching alert settings for device:",e),(await q.get(`/devices/${encodeURIComponent(e)}/alerts`)).data}catch(t){throw console.error("Failed to fetch alert settings:",t),t}},async updateAlertSettings(e,t){try{return console.log("Updating alert settings for device:",e,t),(await q.put(`/devices/by-icealert/${encodeURIComponent(e)}/alerts`,t)).data}catch(r){throw console.error("Failed to update alert settings:",r),r}},async getAlertHistory(e,t=7){try{return console.log("Fetching alert history for device:",e,"days:",t),(await q.get(`/devices/${encodeURIComponent(e)}/alert-history`,{params:{days:t}})).data}catch(r){throw console.error("Failed to fetch alert history:",r),r}},async testConnection(){try{return console.log("Testing database connection"),(await q.get("/test-db")).data}catch(e){throw console.error("Database connection test failed:",e),e}},async checkSchema(){try{return console.log("Checking database schema"),(await q.get("/debug/schema")).data}catch(e){throw console.error("Schema check failed:",e),e}}};function Ls(){const[e,t]=_.useState([]),[r,n]=_.useState(!0),[a,o]=_.useState(null);_.useEffect(()=>{(async()=>{try{n(!0);const u=await qt.getDevices();t(u)}catch(u){console.error("Error fetching devices:",u),o(u.message||"Failed to load devices")}finally{n(!1)}})()},[]);const d=e.reduce((f,u)=>{var x,S;const c=parseFloat(((x=u.temperature)==null?void 0:x.replace(/[^\d.-]/g,""))||"0"),m=parseFloat(((S=u.humidity)==null?void 0:S.replace(/[^\d.-]/g,""))||"0"),b=u.lastFlowDetection?Math.round((Date.now()-new Date(u.lastFlowDetection).getTime())/(1e3*60*60)):0,y=c<20||c>25,h=b>=4,p=m<45||m>55;return y&&h?f.critical++:y||h||p?f.warning++:f.good++,f},{good:0,warning:0,critical:0});return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading devices..."})]})}):a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Error Loading Devices"}),s.jsx("p",{className:"text-gray-600 mb-4",children:a}),s.jsx("button",{onClick:()=>window.location.reload(),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Try Again"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Device Status Overview"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Good"}),s.jsx("p",{className:"text-2xl font-bold text-green-700",children:d.good})]}),s.jsx("div",{className:"bg-green-100 rounded-full p-2",children:s.jsx("span",{className:"text-green-500 text-xl",children:"✓"})})]})}),s.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"Warning"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:d.warning})]}),s.jsx("div",{className:"bg-yellow-100 rounded-full p-2",children:s.jsx("span",{className:"text-yellow-500 text-xl",children:"⚠️"})})]})}),s.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-red-600 text-sm font-medium",children:"Critical"}),s.jsx("p",{className:"text-2xl font-bold text-red-700",children:d.critical})]}),s.jsx("div",{className:"bg-red-100 rounded-full p-2",children:s.jsx("span",{className:"text-red-500 text-xl",children:"⚠️"})})]})})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-6",children:e.map(f=>s.jsx(tr,{...f},f.icealert_id))}),s.jsxs("div",{className:"text-sm text-gray-500 mt-6",children:["Last updated: ",new Date().toLocaleString()]})]})}const A={temperature:{min:20,max:25,unit:"°C"},flowRate:{min:1.5,max:3,unit:"L/min",criticalTimeThreshold:4,warningTimeThreshold:2},humidity:{min:45,max:55,unit:"%"}},xt={enabled:!0,recipients:[""],conditions:{temperature:{enabled:!0,outOfRange:!0,threshold:!0,thresholdValue:30,frequency:"immediate"},humidity:{enabled:!0,outOfRange:!0,threshold:!0,thresholdValue:60,frequency:"immediate"},flowRate:{enabled:!0,outOfRange:!0,noFlow:!0,noFlowDuration:30,frequency:"immediate"}},combinationAlerts:[{id:1,enabled:!1,name:"Temperature and Flow Issues",conditions:{temperature:{enabled:!0,outOfRange:!0},flowRate:{enabled:!0,noFlow:!0,duration:15}},frequency:"immediate"},{id:2,enabled:!1,name:"All Parameters Alert",conditions:{temperature:{enabled:!0,outOfRange:!0},humidity:{enabled:!0,outOfRange:!0},flowRate:{enabled:!0,noFlow:!0,duration:15}},frequency:"immediate"}]},Fe=({data:e,metric:t,title:r,color:n,unit:a,stats:o,isInRange:i,timeRange:d,onTimeRangeChange:f})=>{var c,m,b,y;const u=A[t];return s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h3",{className:"text-xl font-semibold",children:r}),s.jsxs("select",{className:"border rounded-lg px-3 py-1.5 bg-white shadow-sm text-sm",value:d,onChange:h=>f(t,h.target.value),"aria-label":`Select Time Range for ${r}`,children:[s.jsx("option",{value:"12h",children:"Last 12 Hours"}),s.jsx("option",{value:"24h",children:"Last 24 Hours"}),s.jsx("option",{value:"48h",children:"Last 48 Hours"})]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Normal Range: ",u.min," - ",u.max,a]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-gray-600 text-xs mb-1",children:"Last Recorded"}),s.jsxs("div",{className:`text-2xl font-bold ${i((c=e[e.length-1])==null?void 0:c[t])?"text-gray-900":"text-red-600"}`,children:[(b=(m=e[e.length-1])==null?void 0:m[t])==null?void 0:b.toFixed(1),a]}),s.jsx("div",{className:"text-sm text-gray-500",children:new Date((y=e[e.length-1])==null?void 0:y.timestamp).toLocaleTimeString()})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-gray-600 text-xs mb-1",children:"Range"}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs("span",{className:`text-sm ${i(parseFloat(o.min))?"text-blue-600":"text-red-600"}`,children:["Min: ",o.min,a]}),s.jsx("span",{className:"text-gray-400 mx-1",children:"|"}),s.jsxs("span",{className:`text-sm ${i(parseFloat(o.max))?"text-blue-600":"text-red-600"}`,children:["Max: ",o.max,a]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-gray-600 text-xs mb-1",children:"Anomalies"}),s.jsx("div",{className:"text-lg font-semibold",children:o.anomalies}),s.jsxs("div",{className:"text-xs text-gray-500",children:["(",(o.anomalies/e.length*100).toFixed(1),"% of readings)"]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-gray-600 text-xs mb-1",children:"Analysis"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Median"}),s.jsxs("span",{className:`font-medium ${i(parseFloat(o.median))?"text-gray-900":"text-red-600"}`,children:[o.median,a]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Std Dev"}),s.jsxs("span",{className:"font-medium",children:[o.stdDev,a]})]})]})]})]}),s.jsx("div",{className:"h-64",children:s.jsx(fe,{width:"100%",height:"100%",children:s.jsxs(pe,{data:e,margin:{top:10,right:10,left:10,bottom:12},children:[s.jsx(Wt,{strokeDasharray:"3 3",className:"opacity-50"}),s.jsx(Vt,{dataKey:"timestamp",tickFormatter:h=>new Date(h).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),interval:"preserveStartEnd",tick:{fontSize:12,fill:"#4B5563"},tickLine:{stroke:"#9CA3AF"},axisLine:{stroke:"#9CA3AF"},minTickGap:30,height:35}),s.jsx(Jt,{tickFormatter:h=>`${h}${a}`,tick:{fontSize:12,fill:"#4B5563"},tickLine:{stroke:"#9CA3AF"},axisLine:{stroke:"#9CA3AF"},domain:[h=>Math.floor(Math.min(u.min*.95,h)),h=>Math.ceil(Math.max(u.max*1.05,h))],width:65}),s.jsx(ce,{y1:u.min,y2:u.max,fill:"#4ade8033",strokeWidth:0}),s.jsx(et,{y:u.min,stroke:"#4ade80",strokeDasharray:"3 3"}),s.jsx(et,{y:u.max,stroke:"#4ade80",strokeDasharray:"3 3"}),s.jsx(Kt,{labelFormatter:h=>new Date(h).toLocaleString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),formatter:h=>[`${h.toFixed(2)}${a} ${i(h)?"✓":"⚠️"}`,r],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},cursor:{stroke:"#9CA3AF",strokeWidth:1}}),s.jsx(ce,{type:"monotone",dataKey:t,stroke:n,fill:`${n}33`,strokeWidth:2,dot:{r:3,fill:"white",stroke:n,strokeWidth:2},activeDot:{r:5,fill:n,stroke:"white",strokeWidth:2}}),e.map((h,p)=>({...h,isAnomaly:!i(h[t])})).filter(h=>h.isAnomaly).map((h,p)=>s.jsx(Gt,{x:h.timestamp,y:h[t],r:4,fill:"red",stroke:"white",strokeWidth:1},p))]})})}),s.jsxs("div",{className:"flex items-center justify-center gap-6 mt-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n}}),s.jsx("span",{children:"Actual Value"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{children:"Out of Range"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-0.5 bg-green-500"}),s.jsxs("span",{children:["Normal Range (",u.min,"-",u.max,a,")"]})]})]})]})},Fs=({deviceDetails:e})=>{const t=(r,n)=>{const a=A[n];return r>=a.min&&r<=a.max};return s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"🌡️"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Temperature"})]}),s.jsx("span",{className:"text-xs text-gray-500",children:"Now"})]}),s.jsxs("p",{className:`text-2xl font-bold ${t(e==null?void 0:e.temperature,"temperature")?"text-blue-900":"text-red-600"}`,children:[e==null?void 0:e.temperature,"°C"]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t(e==null?void 0:e.temperature,"temperature")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t(e==null?void 0:e.temperature,"temperature")?"Within Range":"Out of Range"}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Normal: ",A.temperature.min,"°C - ",A.temperature.max,"°C"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"💧"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Humidity"})]}),s.jsx("span",{className:"text-xs text-gray-500",children:"Now"})]}),s.jsxs("p",{className:`text-2xl font-bold ${t(e==null?void 0:e.humidity,"humidity")?"text-blue-900":"text-red-600"}`,children:[e==null?void 0:e.humidity,"%"]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t(e==null?void 0:e.humidity,"humidity")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t(e==null?void 0:e.humidity,"humidity")?"Within Range":"Out of Range"}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Normal: ",A.humidity.min,"% - ",A.humidity.max,"%"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"🌊"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Flow Rate"})]}),s.jsx("span",{className:"text-xs text-gray-500",children:"Now"})]}),s.jsxs("p",{className:`text-2xl font-bold ${t(e==null?void 0:e.flowRate,"flowRate")?"text-blue-900":"text-red-600"}`,children:[e==null?void 0:e.flowRate," L/min"]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t(e==null?void 0:e.flowRate,"flowRate")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t(e==null?void 0:e.flowRate,"flowRate")?"Active":"Warning"}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Normal: ",A.flowRate.min," - ",A.flowRate.max," L/min"]})]})]})]})},Ps=({isOpen:e,onClose:t,settingsForm:r,handleSettingsChange:n,handleEmailChange:a,addEmailRecipient:o,removeEmailRecipient:i,handleAlertConditionChange:d,handleCombinationAlertChange:f,handleSaveSettings:u})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:s.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Device Settings"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name"}),s.jsx("input",{type:"text",value:r.name,onChange:c=>n("name",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:r.location,onChange:c=>n("location",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Part Number"}),s.jsx("input",{type:"text",value:r.partNumber,onChange:c=>n("partNumber",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serial Number"}),s.jsx("input",{type:"text",value:r.serialNumber,onChange:c=>n("serialNumber",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Normal Operating Ranges"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature Range (°C)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Minimum"}),s.jsx("input",{type:"number",value:r.normalRanges.temperature.min,onChange:c=>n("normalRanges.temperature.min",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Maximum"}),s.jsx("input",{type:"number",value:r.normalRanges.temperature.max,onChange:c=>n("normalRanges.temperature.max",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Humidity Range (%)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Minimum"}),s.jsx("input",{type:"number",value:r.normalRanges.humidity.min,onChange:c=>n("normalRanges.humidity.min",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Maximum"}),s.jsx("input",{type:"number",value:r.normalRanges.humidity.max,onChange:c=>n("normalRanges.humidity.max",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flow Rate Range (L/min)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Minimum"}),s.jsx("input",{type:"number",value:r.normalRanges.flowRate.min,onChange:c=>n("normalRanges.flowRate.min",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Maximum"}),s.jsx("input",{type:"number",value:r.normalRanges.flowRate.max,onChange:c=>n("normalRanges.flowRate.max",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Alert Settings"}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Email Alerts"}),s.jsx("button",{type:"button",className:`${r.alerts.enabled?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,onClick:()=>n("alerts.enabled",!r.alerts.enabled),children:s.jsx("span",{className:`${r.alerts.enabled?"translate-x-5":"translate-x-0"} pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]})}),r.alerts.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Recipients"}),s.jsxs("div",{className:"space-y-3",children:[r.alerts.recipients.map((c,m)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"email",value:c,onChange:b=>a(m,b.target.value),placeholder:"Enter email address",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),r.alerts.recipients.length>1&&s.jsx("button",{type:"button",onClick:()=>i(m),className:"text-red-600 hover:text-red-700",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},m)),s.jsxs("button",{type:"button",onClick:o,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Another Recipient"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Temperature Alerts"}),s.jsx("button",{type:"button",className:`${r.alerts.conditions.temperature.enabled?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,onClick:()=>d("temperature","enabled",!r.alerts.conditions.temperature.enabled),children:s.jsx("span",{className:`${r.alerts.conditions.temperature.enabled?"translate-x-5":"translate-x-0"} pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]}),r.alerts.conditions.temperature.enabled&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:r.alerts.conditions.temperature.outOfRange,onChange:c=>d("temperature","outOfRange",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"text-sm text-gray-700",children:"Alert when temperature is out of normal range"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:r.alerts.conditions.temperature.threshold,onChange:c=>d("temperature","threshold",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"text-sm text-gray-700",children:"Alert when temperature exceeds"}),s.jsx("input",{type:"number",value:r.alerts.conditions.temperature.thresholdValue,onChange:c=>d("temperature","thresholdValue",parseFloat(c.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",disabled:!r.alerts.conditions.temperature.threshold}),s.jsx("span",{className:"text-sm text-gray-700",children:"°C"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Humidity Alerts"}),s.jsx("button",{type:"button",className:`${r.alerts.conditions.humidity.enabled?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,onClick:()=>d("humidity","enabled",!r.alerts.conditions.humidity.enabled),children:s.jsx("span",{className:`${r.alerts.conditions.humidity.enabled?"translate-x-5":"translate-x-0"} pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]}),r.alerts.conditions.humidity.enabled&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:r.alerts.conditions.humidity.outOfRange,onChange:c=>d("humidity","outOfRange",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"text-sm text-gray-700",children:"Alert when humidity is out of normal range"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:r.alerts.conditions.humidity.threshold,onChange:c=>d("humidity","threshold",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"text-sm text-gray-700",children:"Alert when humidity exceeds"}),s.jsx("input",{type:"number",value:r.alerts.conditions.humidity.thresholdValue,onChange:c=>d("humidity","thresholdValue",parseFloat(c.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",disabled:!r.alerts.conditions.humidity.threshold}),s.jsx("span",{className:"text-sm text-gray-700",children:"%"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Flow Rate Alerts"}),s.jsx("button",{type:"button",className:`${r.alerts.conditions.flowRate.enabled?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,onClick:()=>d("flowRate","enabled",!r.alerts.conditions.flowRate.enabled),children:s.jsx("span",{className:`${r.alerts.conditions.flowRate.enabled?"translate-x-5":"translate-x-0"} pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]}),r.alerts.conditions.flowRate.enabled&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:r.alerts.conditions.flowRate.outOfRange,onChange:c=>d("flowRate","outOfRange",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"text-sm text-gray-700",children:"Alert when flow rate is out of normal range"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:r.alerts.conditions.flowRate.noFlow,onChange:c=>d("flowRate","noFlow",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"text-sm text-gray-700",children:"Alert on no flow detection"})]}),r.alerts.conditions.flowRate.noFlow&&s.jsxs("div",{className:"flex items-center gap-3 ml-7",children:[s.jsx("label",{className:"text-sm text-gray-700",children:"Alert after"}),s.jsx("input",{type:"number",min:"1",value:r.alerts.conditions.flowRate.noFlowDuration,onChange:c=>d("flowRate","noFlowDuration",Math.max(1,parseInt(c.target.value))),className:"w-20 px-2 py-1 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),s.jsx("label",{className:"text-sm text-gray-700",children:"minutes of no flow"})]})]})]})]})]})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})}):null,gt=()=>{var We,Ve;const{icealertId:e}=Yt(),t=Qt(),r=bt(),[n,a]=_.useState((We=t.state)==null?void 0:We.deviceDetails),[o,i]=_.useState(!((Ve=t.state)!=null&&Ve.deviceDetails)),[d,f]=_.useState(null),[u,c]=_.useState(!1),[m,b]=_.useState({name:"",location:"",partNumber:"",serialNumber:"",normalRanges:{...A},alertThresholds:{flowRate:{warning:A.flowRate.warningTimeThreshold,critical:A.flowRate.criticalTimeThreshold,noFlowDuration:30}},alerts:xt}),[y,h]=_.useState({temperature:"24h",humidity:"24h",flowRate:"24h"}),[p,x]=_.useState({temperature:[],humidity:[],flowRate:[]});_.useEffect(()=>{n&&b({name:n.name,location:n.location,partNumber:n.partNumber,serialNumber:n.serialNumber,normalRanges:{...A},alertThresholds:{flowRate:{warning:A.flowRate.warningTimeThreshold,critical:A.flowRate.criticalTimeThreshold,noFlowDuration:n.noFlowDuration||30}},alerts:n.alerts||xt})},[n]);const S=(g,R)=>{b(v=>{const N={...v};if(g.includes(".")){const[j,$,V]=g.split(".");N[j]||(N[j]={}),N[j][$]||(N[j][$]={}),N[j][$][V]=parseFloat(R)}else N[g]=R;return N})},T=(g,R)=>{b(v=>{const N={...v};return N.alerts.recipients[g]=R,N})},k=()=>{b(g=>({...g,alerts:{...g.alerts,recipients:[...g.alerts.recipients,""]}}))},M=g=>{b(R=>({...R,alerts:{...R.alerts,recipients:R.alerts.recipients.filter((v,N)=>N!==g)}}))},L=(g,R,v)=>{b(N=>({...N,alerts:{...N.alerts,conditions:{...N.alerts.conditions,[g]:{...N.alerts.conditions[g],[R]:v}}}}))},I=(g,R,v)=>{b(N=>({...N,alerts:{...N.alerts,combinationAlerts:N.alerts.combinationAlerts.map(j=>{if(j.id===g){if(R.includes(".")){const[$,V,Q]=R.split(".");return{...j,conditions:{...j.conditions,[$]:{...j.conditions[$],[V]:Q?v:parseFloat(v)}}}}return{...j,[R]:v}}return j})}}))},z=async()=>{try{const g={...n,name:m.name,location:m.location,partNumber:m.partNumber,serialNumber:m.serialNumber};a(g);const R={temperature:{...A.temperature,min:parseFloat(m.normalRanges.temperature.min),max:parseFloat(m.normalRanges.temperature.max)},humidity:{...A.humidity,min:parseFloat(m.normalRanges.humidity.min),max:parseFloat(m.normalRanges.humidity.max)},flowRate:{...A.flowRate,min:parseFloat(m.normalRanges.flowRate.min),max:parseFloat(m.normalRanges.flowRate.max),warningTimeThreshold:parseFloat(m.alertThresholds.flowRate.warning),criticalTimeThreshold:parseFloat(m.alertThresholds.flowRate.critical)}};Object.assign(A,R);const v={icealert_id:e,enabled:m.alerts.enabled,recipients:m.alerts.recipients.filter(j=>j.trim()),conditions:m.alerts.conditions,combinationAlerts:m.alerts.combinationAlerts,normalRanges:R};await qt.updateAlertSettings(e,v);const N={temperature:G("temperature",y.temperature),humidity:G("humidity",y.humidity),flowRate:G("flowRate",y.flowRate)};x(N),v.enabled&&B(),c(!1)}catch(g){console.error("Error saving settings:",g),alert("Failed to save settings. Please try again.")}},W=(g,R)=>{if(!g||g.length===0)return null;const v=g.map(C=>C[R]),N=[...v].sort((C,H)=>C-H),j=N.length,$=j%2===0?(N[j/2-1]+N[j/2])/2:N[Math.floor(j/2)],V=v.reduce((C,H)=>C+H,0)/j,Q=v.reduce((C,H)=>C+Math.pow(H-V,2),0)/j,oe=Math.sqrt(Q),he=v.slice(0,Math.floor(j/2)),ie=v.slice(Math.floor(j/2)),Y=he.reduce((C,H)=>C+H,0)/he.length,E=ie.reduce((C,H)=>C+H,0)/ie.length-Y;return{min:Math.min(...v).toFixed(1),max:Math.max(...v).toFixed(1),avg:V.toFixed(1),median:$.toFixed(1),stdDev:oe.toFixed(2),trend:E.toFixed(2),anomalies:v.filter(C=>Math.abs(C-V)>2*oe).length,stability:((1-oe/V)*100).toFixed(1)}},X=(g,R)=>{if(!g)return!0;const v=A[R];return g>=v.min&&g<=v.max},G=(g,R)=>{if(!n)return[];const N={"12h":24,"24h":48,"48h":96}[R]||48,j={temperature:parseFloat(n.temperature),humidity:parseFloat(n.humidity),flowRate:parseFloat(n.flowRate)},$={temperature:()=>j.temperature+(Math.random()*2-1),humidity:()=>j.humidity+(Math.random()*4-2),flowRate:()=>j.flowRate*(1+(Math.random()*.4-.2))};return Array.from({length:N},(V,Q)=>({timestamp:new Date(Date.now()-(N-1-Q)*18e5).toISOString(),[g]:$[g]()}))},P=(g,R)=>{h(v=>({...v,[g]:R})),x(v=>({...v,[g]:G(g,R)}))},B=()=>{window.alertMonitoringInterval&&clearInterval(window.alertMonitoringInterval),window.alertMonitoringInterval=setInterval(async()=>{var g,R,v;try{const N={name:n.name,temperature:(g=p.temperature[p.temperature.length-1])==null?void 0:g.temperature,humidity:(R=p.humidity[p.humidity.length-1])==null?void 0:R.humidity,flowRate:(v=p.flowRate[p.flowRate.length-1])==null?void 0:v.flowRate};if(!(await fetch(`${te}/api/alerts/check/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok)throw new Error("Failed to check alerts")}catch(N){console.error("Error checking alerts:",N)}},6e4)};_.useEffect(()=>()=>{window.alertMonitoringInterval&&clearInterval(window.alertMonitoringInterval)},[]),_.useEffect(()=>{if(!n){r("/");return}const g={temperature:G("temperature",y.temperature),humidity:G("humidity",y.humidity),flowRate:G("flowRate",y.flowRate)};x(g)},[n,r]);const ae=()=>{var g;try{if(!((g=p.temperature)!=null&&g.length)){console.error("No data available to export");return}const R=(E,C)=>E==null?"No Data":E>=A[C].min&&E<=A[C].max?"Normal":"Out of Range",v=E=>{try{return new Date(E).toLocaleString()}catch{return E}},N=p.temperature.map((E,C)=>{var H,Ke,Ge,Xe,Ye,Qe,Ze;return{timestamp:v(E.timestamp),temperature:((H=E.temperature)==null?void 0:H.toFixed(2))??"N/A",humidity:((Ge=(Ke=p.humidity[C])==null?void 0:Ke.humidity)==null?void 0:Ge.toFixed(2))??"N/A",flowRate:((Ye=(Xe=p.flowRate[C])==null?void 0:Xe.flowRate)==null?void 0:Ye.toFixed(2))??"N/A",temperatureStatus:R(E.temperature,"temperature"),humidityStatus:R((Qe=p.humidity[C])==null?void 0:Qe.humidity,"humidity"),flowRateStatus:R((Ze=p.flowRate[C])==null?void 0:Ze.flowRate,"flowRate")}}),j=E=>E==null?"":`"${String(E).replace(/"/g,'""')}"`,$=["Timestamp","Temperature (°C)","Temperature Status","Humidity (%)","Humidity Status","Flow Rate (L/min)","Flow Rate Status"],V=[["Device Information"],[`Device Name,${j(n.name)}`],[`Location,${j(n.location)}`],[`Part Number,${j(n.partNumber)}`],[`Serial Number,${j(n.serialNumber)}`],[`IceAlert ID,${j(n.iceAlertSerial)}`],[""],["Normal Operating Ranges"],[`Temperature,${A.temperature.min}°C - ${A.temperature.max}°C`],[`Humidity,${A.humidity.min}% - ${A.humidity.max}%`],[`Flow Rate,${A.flowRate.min} L/min - ${A.flowRate.max} L/min`],[""],$],Q=N.map(E=>[j(E.timestamp),j(E.temperature),j(E.temperatureStatus),j(E.humidity),j(E.humidityStatus),j(E.flowRate),j(E.flowRateStatus)]),oe=[...V,...Q].map(E=>Array.isArray(E)?E.join(","):E).join(`
`),he=new Blob(["\uFEFF"+oe],{type:"text/csv;charset=utf-8;"}),ie=window.URL.createObjectURL(he),Y=document.createElement("a"),Je=`${n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_data_export_${new Date().toISOString().split("T")[0]}.csv`;Y.setAttribute("href",ie),Y.setAttribute("download",Je),Y.style.visibility="hidden",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(ie)}catch(R){console.error("Error exporting data:",R)}};return o?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading device data..."})]})}):d?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Error Loading Device"}),s.jsx("p",{className:"text-gray-600 mb-4",children:d}),s.jsx("button",{onClick:()=>r("/"),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Return to Dashboard"})]})}):n?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-md",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs("button",{onClick:()=>r("/"),className:"text-blue-600 hover:text-blue-800 flex items-center gap-2 transition-colors",children:[s.jsx("span",{className:"text-xl",children:"←"}),s.jsx("span",{className:"font-medium",children:"Dashboard"})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300"}),s.jsx("div",{className:"flex-1",children:s.jsxs("h1",{className:"text-2xl font-bold text-blue-900 flex items-center gap-2",children:[s.jsx("span",{children:"❄️"}),"Device Analytics"]})})]}),s.jsxs("div",{className:"flex justify-between items-center py-3 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:n==null?void 0:n.name}),s.jsx("p",{className:"text-sm text-gray-600",children:n==null?void 0:n.location})]}),s.jsx("div",{className:"h-10 w-px bg-gray-200"}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Part Number"}),s.jsx("p",{className:"font-medium",children:n==null?void 0:n.partNumber})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Serial Number"}),s.jsx("p",{className:"font-medium",children:n==null?void 0:n.serialNumber})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"IceAlert ID"}),s.jsx("p",{className:"font-medium",children:n==null?void 0:n.iceAlertSerial})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>c(!0),className:"bg-gray-50 text-gray-600 px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{children:"Device Settings"})]}),s.jsxs("button",{onClick:ae,className:"bg-blue-50 text-blue-600 px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-blue-100 transition-colors flex items-center gap-2",children:[s.jsx("span",{children:"Export Data"}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]})]})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[s.jsx(Fs,{deviceDetails:n}),s.jsx(Fe,{data:p.temperature,metric:"temperature",title:"Temperature",color:"#3b82f6",unit:"°C",stats:W(p.temperature,"temperature"),isInRange:g=>X(g,"temperature"),timeRange:y.temperature,onTimeRangeChange:P}),s.jsx(Fe,{data:p.flowRate,metric:"flowRate",title:"Flow Rate",color:"#10b981",unit:" L/min",stats:W(p.flowRate,"flowRate"),isInRange:g=>X(g,"flowRate"),timeRange:y.flowRate,onTimeRangeChange:P}),s.jsx(Fe,{data:p.humidity,metric:"humidity",title:"Humidity",color:"#6366f1",unit:"%",stats:W(p.humidity,"humidity"),isInRange:g=>X(g,"humidity"),timeRange:y.humidity,onTimeRangeChange:P})]}),s.jsx(Ps,{isOpen:u,onClose:()=>c(!1),settingsForm:m,handleSettingsChange:S,handleEmailChange:T,addEmailRecipient:k,removeEmailRecipient:M,handleAlertConditionChange:L,handleCombinationAlertChange:I,handleSaveSettings:z})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Device Not Found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"The requested device could not be found."}),s.jsx("button",{onClick:()=>r("/"),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Return to Dashboard"})]})})},_s=()=>s.jsx(Zt,{children:s.jsx("div",{className:"min-h-screen bg-gray-100",children:s.jsxs(er,{children:[s.jsx(Te,{path:"/",element:s.jsx(Ls,{})}),s.jsx(Te,{path:"/devices/by-icealert/:icealertId",element:s.jsx(gt,{})}),s.jsx(Te,{path:"/analytics",element:s.jsx(gt,{})})]})})});Pe.createRoot(document.getElementById("root")).render(s.jsx(Xt.StrictMode,{children:s.jsx(_s,{})}));
//# sourceMappingURL=index-649NUDB1.js.map
